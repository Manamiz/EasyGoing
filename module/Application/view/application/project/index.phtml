<h1>Dashboard - <?php echo $project->name; ?></h1>
<p>Description : <?php echo $project->description; ?></p>
<p>Durée : du <?php echo $project->startDate . ' au ' . $project->deadLineDate; ?></p>
<a href="<?php echo $this->serverUrl(true) . '/addTask'; ?>">Ajouter une tâche</a> -
<a href="<?php echo $this->serverUrl(true) . '/addMember'; ?>">Ajouter un membre</a>
<button class="btn btn-info" onclick="loadBoardViewMembers();">Board view members</button>
<button class="btn btn-info" onclick="loadBoardViewTasks();">Board view tasks</button>
<button class="btn btn-info" onclick="testWebsocket();">Test websockets</button>
<p id="result"></p>
<div id="board-container"></div>
<br><br><hr><br>
<br>
<div class="container-fluid">
   <div class="row">
      <div class="col-md-6">
         <div class="panel panel-default">
            <div class="panel-heading">Tasks</div>
            <div class="panel-body">
               <?php foreach ($tasks as $task) : ?>
               <p><?php echo $task->name; ?></p>
               <?php endforeach; ?>
            </div>
         </div>
      </div>
      <div class="col-md-6">
         <div class="panel panel-default">
            <div class="panel-heading">Members</div>
            <div class="panel-body">
               <?php foreach ($members as $member) : ?>
               <p><?php echo $member->username; ?></p>
               <?php endforeach; ?>
            </div>
         </div>
      </div>
      <div class="col-md-6">
         <div class="panel panel-default">
            <div class="panel-heading">Test</div>
            <div class="panel-body">
               <pre>
               <?php foreach ($tasksForMember as $t) : ?>
               <p><?php var_dump($t); ?></p>
               <?php endforeach; ?>
               </pre>
            </div>
         </div>
      </div>
   </div>
</div>

<script>
$('#board-container').load(<?php echo '"'.$this->serverUrl(true) . '/boardViewMembers"'; ?>);
function loadBoardViewMembers()
{
   $('#board-container').load(<?php echo '"'.$this->serverUrl(true) . '/boardViewMembers"'; ?>);
}
function loadBoardViewTasks()
{
   $('#board-container').load(<?php echo '"'.$this->serverUrl(true) . '/boardViewTasks"'; ?>);
}

loadBoardViewMembers();
</script>